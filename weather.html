<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Robert Boder: Homepage</title>
  <link href="_css/homepage.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <style>
  h2{
    text-align: center;
  }
  </style>
</head>
<body>
  <nav>
    <li><a href="index.html">Home</a></li>
    <li><p>About Me</p></li>
    <li><a href="tutorials/tutorials.html">Javascript Tutorials</a></li>
    <li><p>Javascript Final Project</p></li>
    <li><a href="contact.html">Contact</a></li>
  </nav>
  <script>
  function httpGet(){
    var d = new Date();
    var city = document.getElementById('input').value;
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", `http://api.openweathermap.org/data/2.5/weather?q=${city}&APPID=b63cc6b7f28a7ad6cf69eab99c96172b`, false );
    xmlHttp.send( null );
    var response = JSON.parse(xmlHttp.responseText);
    document.getElementById('city-name').innerHTML = `Currently in ${response.name}:`;
    document.getElementById('city-overview').innerHTML = `${response.weather[0].main}`;
    document.getElementById('city-description').innerHTML = `${response.weather[0].description}`;
    var temp = Math.round((response.main.temp - 273.15) * 9/5 + 32)
    document.getElementById('city-temp').innerHTML = `It is ${temp} degrees Fahrenheit`;
    if (response.weather[0].main == 'Rain'){
      document.getElementById('city-icon').innerHTML = `<img id="city-icon" src="_images/noun_Rain_2200974.png" alt="Rain" height=100px width=100px>`;
    } else if (response.weather[0].main == 'Clouds'){
      document.getElementById('city-icon').innerHTML = `<img id="city-icon" src="_images/noun_clouds_2191447.png" alt="Clouds" height=100px width=100px>`;
    } else if (response.weather[0].main == 'Clear'){
      document.getElementById('city-icon').innerHTML = `<img id="city-icon" src="_images/noun_clear sky_1958882.png" alt="Clouds" height=100px width=100px>`;
    }
    else {
      document.getElementById('city-icon').innerHTML = `<img id="city-icon" src="_images/noun_questions_1011179.png" alt="Unknown" height=100px width=100px>`
    }
  }
  </script>
  <input type='text' id='input'>
  <input type='button' value='Get Weather' onClick='httpGet()'>
  <h1 id="city-name"></p>
  <h2 id="city-overview"></p>
  <h2 id="city-icon"><h2>
  <h2 id="city-description"></p>
  <h2 id="city-temp"></p>
  <footer>
    <p>&copy; Robert Boder. 2019. Email: <a href="mailto:rboder@gmail.com">
      rboder@gmail.com</a></p>
  </footer>
</body>
</html>
